___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "ImpactHero Main Tag",
  "categories": [
    "ANALYTICS",
    "ATTRIBUTION",
    "CONVERSIONS"
  ],
  "brand": {
    "id": "semrush.com",
    "displayName": "Semrush",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "ImpactHero is an AI tool that breaks down your content by buyer journey stages, detects the most impactful copies and gives tips on improving your content strategy.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "campaignId",
    "displayName": "Campaign Id",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const createArgumentsQueue = require('createArgumentsQueue');
const setInWindow = require('setInWindow');
const getTimestampMillis = require('getTimestampMillis');
const encodeUriComponent = require('encodeUriComponent');
const injectScript = require('injectScript');

const cat = createArgumentsQueue('cat', 'cat.q');

setInWindow('cat.l', getTimestampMillis(), false);
cat('create', data.campaignId);
cat('send', 'pageview');

const url = 'https://scatec.io/t/app.js?id=' + encodeUriComponent(data.campaignId) + '&mode=gtm-template';
injectScript(url, data.gtmOnSuccess, data.gtmOnFailure, url);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cat"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cat.q"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cat.l"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://scatec.io/t/app.js?id\u003d*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 13/01/2021, 14:27:46


